Networks are constantly at risk of attack from malicious hackers.
- Malware
- Spoofing
- Packet sniffing
- Packet flooding

Backdoor attack:
Backdoors are weaknesses intentionally left by programmer or system and network administrators that bypass normal access control mechanisms.

Backdoors can also be installed by the attackers after they've compromised an organization to ensure they have persistent access.

Denial of Service(DoS) attack is an attack that targets a network or server and floods it with network traffic.

Attacker can harm an organization by:
- Leaking valuable or confidential information
- Damaging an organization's reputation
- Impacting customer retention
- Costing money and time

Possible Impact on an organization:
- Financial: By DoS
- Reputation: if the attack becomes public, the customer may stop trusting the company.
- Public safety: if the attack on a government network (public water system, military defense communication system).

## Denial of service attack (DoS)
An attack that targets a network or server and floods it with network traffic.
To Disrupt the normal organization operation by over loading the network. (Availability and Accessability)

## Distributed denial of service attack (DDoS)
A type of denial of service attack that uses multiple devices or services in different locations to flood the target network with unwanted traffic.

### Network level DoS attack:
- SYN (Synchronize) flood attack: 
by simulates the TCP connection and floods the server with SYN packets.

At the connection handshake between a device and server, the first step in the handshake is for the device to send a SYN (Synchronize) request to the sercer.
Then server will responds with a SYN/ACK packet to acknowledge the receipt of the device's request and leaves a port open for the final step of the handshake.
Then the device has to send the ACK package to establish a TCP connection.

But the hacker send a flood of SYN request more than the number of server ports available, the server will hang and become unable to function.

- Internet Control Message Protocol (ICMP)
An internet protocol used by devices to tell each other about data transmission errors across the network.
It is a status update from the device if there is an error concern.
ICMP flood attack: is a type of DoS attack performed by an attacker repeatedly sending ICMP packets to a network server, which will false the server to send an ICMP packet and this will consume all the bandwidth of the Network incoming and outgoing traffic, or crash the server.

- Ping of death
A type of DoS attack caused when a hacker pings a system by sending it a oversized ICMP packet that is bigger than 64KB(Maximum size of the ICMP packet).

## TCP dump
A network protocol analyzer (Packet Sniffer) is a tool designed to capture and analyze data traffic within a network.
- SolarWinds NetFlow Traffic Analyzer
- ManageEngine OpManager
- Azure Network Watcher
- Wireshark
- tcpdump


tcpdump is a command line network protocol analyzer (lightweigh, uses open-source library libpcap)

The captured packets have:
- Timestamp
- Source IP.Source port
- Destination IP.Destination port
By default tcpdump will try to resolve the host address and port numbers with the associated service

Network Interface Card (NIC) is a hardware that connect the device to a network and it contains the device's MAC address.
NIC can be set to promiscuous mode, which means that it accepts all traffic on the network.
So malicious actors might use software like wireshark to capture the data on a private network and store it.


## Packet sniffing
hacker can use a software or hardware packet sniffer and change the data (body of the packet)
- Passive packet sniffing: where data packets are read in transit (no change for the data, only reading)
- Active packet sniffing: where data packets are manipulated in transit.

Can be prevented by VPN, because the data packet is encrypted and encapsulated.
Use Https web site.
Do not use the unprotected WiFi.


## Ip Spoofing
A network attack performed when the attacker changes the source IP of a data packet to impersonate an authorized system and gain access to a network. (to pass firewall for example).
Common IP Spoofing attacks:
- On-path attack
- Replay attack
- Smurf attack

On-path attack (**meddler-in-the middle attack**)
An attack where malicious actor places themselves in the middle of an authorized connection and intercepts or alters the data in transit.

Replay attack
A network attack performed when a malicious actor intercepts a data packet in transit and delays it or repeats it at another time.

Smurf attack
Combination of DoS attack and Spoofing attack, when an attacker sniffs an authorized user's IP address and floods it with packets.
Once the spoofed packet reaches the broadcast address, it is sent to all of the devices and servers on the network.

To prevent these attacks:
- Encryption
- Firewalls (reject all packets that coming from internet with a local network IP)





## TLS
It was not uncommon for an attacker to set their network card in promiscuous mode, i.e., to capture all packets, including those not destined to it. They would later go through all the packet captures and obtain the login credentials of unsuspecting victims. There was nothing a user could do to prevent their login password from being sent in cleartext. Nowadays, it has become uncommon to come across a service that sends login credentials in cleartext.

They eventually developed SSL (Secure Sockets Layer) and released SSL 2.0 in **1995** as the first public version. In **1999**, the Internet Engineering Task Force (IETF) developed TLS (Transport Layer Security). Although very similar, TLS 1.0 was an upgrade to SSL 3.0 and offered various improved security measures. In **2018**, TLS had a significant overhaul of its protocol and TLS 1.3 was released. The purpose is not to remember the exact dates but to realise the amount of work and time put into developing the current version of TLS, i.e., TLS 1.3. Over more than two decades, there have been many things to learn from and improve with every version.

Nowadays, tens of protocols have received security upgrades with the simple addition of TLS. Examples include HTTP, DNS, MQTT, and SIP, which have become HTTPS, DoT (DNS over TLS), MQTTS, and SIPS, where the appended “S” stands for Secure due to the use of SSL/TLS. In the following tasks, we will visit HTTPS, SMTPS, POP3S, and IMAPS.

 TLS is set up and used:
 every server (or client) that needs to identify itself is to get a signed TLS certificate. Generally, the server administrator creates a Certificate Signing Request (CSR) and submits it to a Certificate Authority (CA).

the CA verifies the CSR and issues a digital certificate. Once the (signed) certificate is received, it can be used to identify the server (or the client) to others, who can confirm the validity of the signature.

For a host to confirm the validity of a signed certificate, the certificates of the signing authorities need to be installed on the host. In the non-digital world, this is similar to recognising the stamps of various authorities.

> some users opt to create a self-signed certificate. A self-signed certificate cannot prove the server’s authenticity as no third party has confirmed it.


## HTTPS
HTTPS stands for Hypertext Transfer Protocol Secure. It is basically HTTP over TLS. Consequently, requesting a page over HTTPS will require the following three steps (after resolving the domain name):

1. Establish a TCP three-way handshake with the target server
2. Establish a TLS session
3. Communicate using the HTTP protocol; for example, issue HTTP requests, such as `GET / HTTP/1.1`

### SMTPS, POP3S, and IMAPS
Adding TLS to SMTP, POP3, and IMAP is no different than adding TLS to HTTP. Similar to how HTTP gets an appended S for _Secure_ and becomes HTTPS, SMTP, POP3, and IMAP become SMTPS, POP3S, and IMAPS, respectively. Using these protocols over TLS is no different than using HTTP over TLS; therefore, almost all the points from the HTTPS discussion apply to these protocols.

The insecure versions use the default TCP port numbers shown in the table below:

| Protocol | Default Port Number |
| -------- | ------------------- |
| HTTP     | 80                  |
| SMTP     | 25                  |
| POP3     | 110                 |
| IMAP     | 143                 |
| Telnet   | 23                  |
The secure versions, i.e., over TLS, use the following TCP port numbers by default:

| Protocol | Default Port Number |
| -------- | ------------------- |
| HTTPS    | 443                 |
| SMTPS    | 465 and 587         |
| POP3S    | 995                 |
| IMAPS    | 993                 |
| SSH      | 22                  |
TLS can be added to many other protocols; the reasoning and advantages would be similar.

### SSH
Tatu Ylönen developed the Secure Shell (SSH) protocol and released SSH-1 in **1995** as freeware. (Interestingly, it was the same year that Netscape Communications released the SSL 2.0 protocol.) A more secure version, SSH-2, was defined in 1996. In **1999**, the OpenBSD developers released OpenSSH, an open-source implementation of SSH. Nowadays, when you use an SSH client, it is most likely based on OpenSSH libraries and source code.

OpenSSH offers several benefits. We will list a few key points:

- **Secure authentication**: Besides password-based authentication, SSH supports public key and two-factor authentication.
- **Confidentiality**: OpenSSH provides end-to-end encryption, protecting against eavesdropping. Furthermore, it notifies you of new server keys to protect against man-in-the-middle attacks.
- **Integrity**: In addition to protecting the confidentiality of the exchanged data, cryptography also protects the integrity of the traffic.
- **Tunneling**: SSH can create a secure “tunnel” to route other protocols through SSH. This setup leads to a VPN-like connection.
- **X11 Forwarding**: If you connect to a Unix-like system with a graphical user interface, SSH allows you to use the graphical application over the network.
> While the TELNET server listens on port 23, the SSH server listens on port 22.


### SFTP and FTPS
SFTP stands for SSH File Transfer Protocol and allows secure file transfer. It is part of the SSH protocol suite and shares the same port number, 22. If enabled in the OpenSSH server configuration, you can connect using a command such as `sftp username@hostname`. Once logged in, you can issue commands such as `get filename` and `put filename` to download and upload files, respectively. Generally speaking, SFTP commands are Unix-like and can differ from FTP commands.

SFTP should not be confused with FTPS. You are right to think that FTPS stands for File Transfer Protocol Secure. How is FTPS secured? Yes, you are correct to estimate that it is secured using TLS, just like HTTPS. While FTP uses port 21, FTPS usually uses port 990. It requires certificate setup, and it can be tricky to allow over strict firewalls as it uses separate connections for control and data transfer.

Setting up an SFTP server is as easy as enabling an option within the OpenSSH server. Like HTTPS, SMTPS, POP3S, IMAPS, and other protocols that rely on TLS for security, FTPS requires a proper TLS certificate to run securely.