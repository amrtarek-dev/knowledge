
## Penetration Testing
It is simulated attack that helps to identify vulnerabilities in systems, network, websites, applications and processes.

PenTest is exploit the weaknesses to determine the potential consequences.

> Organizations that are regulated by PCI DSS, HIPAA, or GDPR must routinely perform penetration testing to maintain compliance standards.

**categories**:
- **Red team** tests _simulate attacks_ to identify vulnerabilities in systems
- **Blue team** tests focus on _defense_
- Purple team tests are _collaborative_ (Attack + Defense)

Strategies:
They are 3:
1. **Open-box testing** is when the tester has the same privileged access that an internal developer would have—information
2. **Closed-box testing** is when the tester has little to no access to internal systems
3. **Partial knowledge testing** is when the tester has limited access and knowledge of an internal system

> [HackerOne](https://hackerone.com/bug-bounty-programs) is a community of ethical hackers where you can find active bug bounties to participate in.

## Attack surface
All the potential Vulnerabilities that a treat actor could exploit.

Analyzing the attack surface is usually the first thing the security teams do.

- Physical attack surface:
	- People and their devices
- Digital attack surface
	- Includes everything that's beyond our organization's firewall, everything that's connected to an organization's network.

## Security hardening
The process of strengthening a system to reduce its vulnerabilities and attack surface.

Minimizing the attack surface by limiting its points of entry.
To apply the attacker mindset you can simulate the attack. there is 2 ways to do so:
1. ProActive: RedTeam exercise
2. ReActive: Blue Team Exercise

## Practicing an attacker mindset
1. Identify a target
2. Determine how the target can be accessed
3. Evaluate attack vectors that can be exploited
4. Find the tools and methods of attack

## Threat Actor
is any person or group who presents a security risk
Normally divided into five categories based on their motivations:
- **Competitors**: benefit from leaked information.
- **State actors** are government intelligence agencies.
- **Criminal syndicates**: organized groups of people who make money from criminal activity.
- **Insider threats**: employees who accidentally compromise assets, or purposefully.
- **Shadow IT**: employee uses their personal email to send work-related communications.

## Type of Hackers
1. Unauthorized hackers 
From Script kiddies to the Professional Black Hat hacker
2. Authorized, or ethical, hackers
Improve an organization's overall security (external security vendors by Bug bounty)
3. Semi-authorized hackers
individuals who might violate ethical standards, but are not considered malicious. For example, a **hacktivist** is a person who might use their skills to achieve a political goal


An **advanced persistent threat (APT)** refers to instances when a threat actor maintains unauthorized access to a system for an extended period of time.

## The Hacker access points (Attack Vectors):
The pathways attackers use to penetrate security defenses.
Threat actors use attack vectors to exploit vulnerabilities and exposures.

- **Direct access**, when they have physical access to a system
- **Removable media**, like USB flash drives
- **Social media platforms**, used for communication and content sharing
- **Email**
- **Wireless networks** on premises
- **Cloud services** usually provided by third-party organizations
- **Supply chains** like third-party vendors that can present a backdoor into systems




## Defending attack vectors
1. Educating users
2. Applying the principle of least privilege
3. Using the right security controls and tools
4. Building a diverse security team


## Brute force Attacks
are a trial-and-error process of discovering private information.

Type:
- Simple (try any combination of username and password)
- Dictionary (use a list of commonly used credentials to access a system)
- Credential stuffing (use stolen login credentials from previous data breaches)
	- Pass the hash (reuse stolen, unsalted hashed credentials to trick an authentication system)

Tools:
- Aircrack-ng
- Hashcat 
- John the Ripper
- Ophcrack
- THC Hydra

Prevention:
- Hashing and salting
    Hashing converts information into a unique value that can then be used to determine its integrity.
    **Salting** is an additional safeguard that’s used to strengthen hash functions
- Multi-factor authentication (MFA)
    is a security measure that requires a user to verify their identity in two or more ways to access a system or network
- CAPTCHA
    Completely Automated Public Turing test to tell Computers and Humans Apart.
	    - Text CAPTCHA
	    - Image CAPTCHA
- Password policies
	- passwords that are at least 8 characters long and feature a letter, number, and symbol.
	- password lockout can limit the number of login attempts before access to an account is suspended and require users to create new, unique passwords after a certain amount of time
	- [National Institute of Standards and Technology (NIST) Special Publication 800-63B](https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-63b.pdf)

## Social Engineering
A manipulation technique that exploit human error to gain private information, access, or valuables

Type of attacks:
- Baiting
USB baiting that relies on someone finding an infected USB drive and plugging it into their device.
- Phishing : trick people via email (or digital communication)
- Quid pro quo: provide their account details to claim the deal
- Tailgating (piggybacking): unauthorized people follow an authorized person into a restricted area
- Watering hole: threat actor compromises a website frequently visited by a specific group of users



Stages of social engineering:
- Prepare (gather information)
- Establish trust (use the information)
- Use persuasion tactics (exploit)
- Disconnect from the target

Preventing:
- Implement managerial controls
- Staying informed of trends
- Sharing your knowledge with others

- [OUCH!](https://www.sans.org/newsletters/ouch/) is a free monthly newsletter from the SANS Institute that reports on social engineering trends and other security topics.
    
- [Scamwatch](https://www.scamwatch.gov.au/) is a resource for news and tools for recognizing, avoiding, and reporting social engineering scams.

### Phishing
The use of digital communications to trick people into revealing sensitive data or deploying malicious software.

It can be done by a phishing kit

#### Phishing kit
A collection of software tools needed to launch a phishing campaign.
- Malicious attachments
- Fake data-collection form
- Fraudulent web links

There is 5 common types of phishing:
- Email phishing
- Spear phishing
- Whaling
- Smishing
- Vishing

#### Email phishing
It is a type of attack sent via email in which threat actors send messages pretending to be a trusted person or entity.
- Spear phishing: is a subset of email phishing, in which specific people are purposefully targeted, such as the accountant of a small business.
- Whaling: it is like the spear phishing by aiming at high-ranking executives in an organisation.

#### Smishing
The use of text messages to obtain sensitive information or to impersonate a known source.

#### Vishing
The exploiting of electronic voice communication to obtain sensitive information or impersonate a known source.

#### Angler phishing
Where attackers impersonate customer service representatives on social media, by intercept a complaints from places like message boards or comment sections and contact the angry customer via social media.
#### Phishing security measures
- Anti-phishing policies
- Employee training resources
- Email filters

### Resources
- [Google’s phishing quiz](https://phishingquiz.withgoogle.com/) is a tool that you can use or share that illustrates just how difficult it can be to identify these attacks.    
- [Phishing.org](https://www.phishing.org/) reports on the latest phishing trends and shares free resources that can help reduce phishing attacks.
- The [Anti-Phishing Working Group (APWG)](https://apwg.org/) is a non-profit group of multidisciplinary security experts that publishes a quarterly report on phishing trends.


## Malware (Malicious Software)
It is a software designed to harm devices or networks.

Common 5 Malware types:
- Virus
- Worm
- Trojan
- Ransomware
- Spyware

### Virus
Is a malicious code written to interfere with computer operations and cause damage to data and software.
It has to be activated by the user to start infection.

### Worm
Is a malware that can duplicate and spread itself across systems on its own.
it does not need the user to activate it.

### Trojan (or Trojan horse)
Malware that look like a legitimate file or program.

### Ransomware
Type of malicious attack where attackers encrypt an organization's data and demand payment to restore access.

### PUA (Potentially Unwanted Application)
is a type of unwanted software that is bundled in with legitimate programs which might display ads
- Adware: Advertising-supported software
- Spyware: Malware that's used to gather and sell information without consent.
- Scareware: tricks users by displaying fake warnings that appear to come from legitimate companies

### Fileless malware
Does not need to be installed by the user because it uses legitimate programs that are already installed to infect a computer.

This type of infection resides in memory where the malware never touches the hard drive
> Fileless malware is detected by performing memory analysis, which requires experience with operating systems.


### Rootkits
A **rootkit** is malware that provides remote, administrative access to a computer. Most attackers use rootkits to open a backdoor to systems, allowing them to install other forms of malware or to conduct network security attacks.

### Botnet
A **botnet**, short for “robot network,” is a collection of computers infected by malware that are under the control of a single threat actor, known as the “bot-herder.” Viruses, worms, and trojans are often used to spread the initial infection and turn the devices into a bot for the bot-herder.

### Cryptojacking
A form of malware that installs software to illegally mine cryptocurrencies


## IDS
Intrusion detection systems is an application the monitors system activity and alerts on possible intrusions.

## Web-Based Exploits
Malicious code or behavior that's used to take advantage of coding flaws in a web application

### Injection attack
Malicious code inserted into a vulnerable application. which is programmed to receive data inputs.

### Cross-site scripting (XSS)
An injection attack that insert code into a vulnerable website or web application.
It can give cybercriminals access to everything that loads on the infected web page. This can include session cookies, geolocation, and even webcams and microphones.

- Reflected
- Stored
- DOM-based
#### Reflected XSS attack
An instance when malicious script is sent to a server and activated during the server's response.

#### Stored XSS attack
An instance when malicious script is injected directly on the server.

#### Document Object Model - based XSS
Document Object Model is the website source code.
An instance when malicious script exists in the webpage a browser loads. (In the URL)

``` js
my.website.com/mything?theme=light
// to be
my.website.com/mything?theme=<script>alert(1);</script>
```

### Database Attack
#### SQL (Structured Query Language)
A programming language used to create, interact with and request information from a database.

#### SQL Injection
An attack that executes unexpected queries on a database. because of lack of sanitized input.

Login Form
``` sql
SELECT id FROM users WHERE user_id = `$username` AND pass_w = `$password`;
```

3 main categories of SQL injection:
- In-band
- Out-of-band
- inferential

##### In-band SQL injection (classic)
In-band, or classic, SQL injection is the most common type. An in-band injection is one that uses the _same communication channel_ to launch the attack and gather the results.

For example, this might occur in the search box of a retailer's website that lets customers find products to buy. If the search box is vulnerable to injection, an attacker could enter a malicious query that would be executed in the database, causing it to return sensitive information like user passwords. The data that's returned is displayed back in the search box where the attack was initiated.

##### Out-of-band SQL injection
An out-of-band injection is one that uses a _different communication channel_  to launch the attack and gather the results.

For example, an attacker could use a malicious query to create a connection between a vulnerable website and a database they control. This separate channel would allow them to bypass any security controls that are in place on the website's server, allowing them to steal sensitive data

**Note:** Out-of-band injection attacks are very uncommon because they'll only work when certain features are enabled on the target server.

##### Inferential SQL injection
Inferential SQL injection occurs when an attacker is unable to directly see the results of their attack. Instead, they can interpret the results by analyzing the _behavior_ of the system.

For example, an attacker might perform a SQL injection attack on the login form of a website that causes the system to respond with an error message. Although sensitive data is not returned, the attacker can figure out the database's structure based on the error. They can then use this information to craft attacks that will give them access to sensitive data or to take control of the system.

#### Injection prevention:
A key to preventing SQL injection attacks is to _escape_ _user inputs_—preventing someone from inserting any code that a program isn't expecting.
- **Prepared statements**: a coding technique that executes SQL statements before passing them on to a database
- **Input sanitization**: programming that removes user input which could be interpreted as code.
- **Input validation**: programming that ensures user input meets a system's expectations.

[OWASP's SQL injection detection techniques](https://owasp.org/www-project-web-security-testing-guide/latest/4-Web_Application_Security_Testing/07-Input_Validation_Testing/05-Testing_for_SQL_Injection)
